<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
</head>
<body>
<h1>
	OI
</h1>
<input id="botao" onclick="sendMessage" type="button" >
	clica
</input>
</body>
<script type="text/javascript">
	const socket = new SockJS("/websocket");
	const stompClient = Stomp.over(socket)
	var currMessage;
	
	stompClient.connect({}, function(frame) {
	    console.log('Connected: ' + frame);
	    stompClient.subscribe('/topic/picture/foo', function(message) {
	    	console.log("chegou");
	        currMessage = message;
	    });
	});
// 	socket.binaryType = "arraybuffer";

// 	socket.onopen = function (event) {
//         console.log("Connected");
//     };

//     socket.onmessage = function (event) {
//         console.log("recebeu msg")
//     };

    function sendMessage() {
		var a = new ArrayBuffer(4);
		var b = new Uint8Array(a);
		b[0] = 0xa1;
		b[1] = 0xb2;
		b[2] = 0xc3;
		b[3] = 0xd4;
		return b;
    }

</script>
</html>